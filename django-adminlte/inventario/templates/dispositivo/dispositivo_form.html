{% extends 'layouts/base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block title %} Crear Dispositivo. {% endblock title %}

{% block bodyclass %} hold-transition sidebar-mini {% endblock bodyclass %}
{% block extrastyle %}
<link rel="stylesheet" href="{% static 'plugins/select2/css/select2.css' %}">
<link rel="stylesheet" href="{% static 'plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}">

{% endblock extrastyle %}
{% block content %}

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Ingresar Dispositivo al sistema.</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              {% comment %} <li class="breadcrumb-item"><a href="{% url 'personas:index' %}">Home</a></li> {% endcomment %}
              <li class="breadcrumb-item active">Ingresar Dispositivo</li>
              <li class="breadcrumb-item"><a href="{% url 'inventario:index_disp' %}">Volver</a></li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row">
          <!-- left column -->
          <div class="col-md-12">
            <!-- Horizontal Form -->
            <div class="card card-info">
              <div class="card-header">
                <h3 class="card-title">Ingreso Dispositivo</h3>
              </div>
              <!-- /.card-header -->
             
              <!-- form start -->
              <form class="form-horizontal" action="" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-5">
                      {% for field in form.visible_fields %}
                      <div class="form-group row">
                        <label for="{{ field.id_for_label }}" class="col-sm-6 col-form-label">{{ field.label  }}</label>
                        <div class="col-sm-6">
                          {{ field|add_class:'form-control-sm'  }}
                        </div>
                        {% for error in field.errors %}
                          <span class="help-block">{{ error }}</span>
                        {% endfor %}
                      </div>
                    {% endfor %}

                  </div>
                
                  <div class="col-md-1 ">
                  </div>
                
                  <div class="col-md-5">
                    <div class="form-group">
                      {{ formset.management_form }}
                      {% for form in formset %}
                        {% for field in form %}

                        <div class="form-group row">
                          <label for="{{ field.id_for_label }}" class="col-sm-6 col-form-label">{{ field.label  }}</label>
                          <div class="col-sm-6">
                            {{ field|add_class:'form-control-sm'  }}
                          </div>
                          {% for error in field.errors %}
                            <span class="help-block">{{ error }}</span>
                          {% endfor %}
                        </div>
                        {% endfor %}
                      {% endfor %}
                      </div>
                      
                    <div class="col-md-1 ">
                    </div>
                  </div>
                
                </div>
                <!-- /.card-body -->
                <div class="card-footer">
                  <button type="submit" class="btn btn-info">Aceptar</button>
                  <button onclick="javascript:history.back();" class="btn btn-default float-right">Cancelar</button>
                </div>
                <!-- /.card-footer -->
              </form>
            </div>
            <!-- /.card -->
          </div>
          <!--/.col (left) -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>

  {% endblock content %}

  {% block extra_scripts %}
    <!-- Page specific script -->
  <script src="{% static 'plugins/select2/js/select2.js' %}"></script>
  <script src="{% static 'plugins/moment/moment-with-locales.min.js' %}"></script>
  <script src="{% static 'plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
  <!-- dropzonejs -->
  <script src="{% static 'plugins/dropzone/min/dropzone.min.js' %}"></script>
  <script>
    $('.select2').select2({
      })
    $('.datepicker').datetimepicker({
      format: 'DD/MM/YYYY',  
      timepicker:false,
      autoclose: true
      }); 
      Dropzone.options.myDropzone = {
        paramName: "imagen", // el nombre de nuestro input
        autoProcessQueue : true,
        parallelUploads: 1,

        init: function() {
            this.on("success", function(file, responseText) {
                // evento lanzado al terminar de subir las im√°genes en cola
                console.log(responseText);
            });
        }
    };
  </script>
  {% endblock extra_scripts %}